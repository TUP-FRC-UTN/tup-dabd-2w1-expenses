<div class="container mt-4">
  <div class="card border">
    <div class="card-body mt-4">
      <h3 class="card-title mb-4">Categorías de Gastos</h3>
      
      <button (click)="showAddModal = true" class="btn btn-primary float-end">Agregar</button>

      <div class="mt-4">
        <table id="myTable" class="table table-striped table-bordered display">
          <thead>
            <tr>
              <th>ID</th>
              <th>Categoría</th>
              <th>Estado</th>
              <th>Fecha</th>
              <th>Opciones</th>
            </tr>
          </thead>
          <tbody>
            <!-- Los datos de las categorías se llenarán dinámicamente -->
          </tbody>
        </table>
      </div>

      <!-- Modal para Agregar Categoría -->
      <div *ngIf="showAddModal" class="modal fade show d-block" tabindex="-1" role="dialog" aria-labelledby="addModalLabel" aria-hidden="true" style="background: rgba(0, 0, 0, 0.5);">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Registrar Categoría de Gasto</h5>
              <button type="button" class="btn-close" aria-label="Close" (click)="showAddModal = false"></button>
            </div>
            <div class="modal-body">
              <form #form="ngForm">
                <div class="mb-3">
                  <label for="categoryName" class="form-label">Nombre de Categoría</label>
                  <input type="text" name="categoryName" id="categoryName" class="form-control" 
                         [(ngModel)]="expenseCategory.description" #category="ngModel" required>
                  <div *ngIf="category.touched && category.invalid" class="text-danger">
                    El nombre de categoría es requerido
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" (click)="showAddModal = false">Cerrar</button>
                  <button type="submit" class="btn btn-success" [disabled]="form.invalid">Guardar</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal para Editar Categoría -->
      <div #modalEdit class="modal fade show d-block" tabindex="-1" role="dialog" aria-hidden="true" *ngIf="showEditModal" style="background: rgba(0, 0, 0, 0.5);">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Editar Categoría</h5>
              <button type="button" class="btn-close" aria-label="Close" (click)="showEditModal = false"></button>
            </div>
            <div class="modal-body">
              <form #editForm="ngForm" (ngSubmit)="updateCategory(editForm)">
                <div class="mb-3">
                  <label for="editCategoryName" class="form-label">Nombre de Categoría</label>
                  <input type="text" name="editCategoryName" id="editCategoryName" class="form-control" 
                         [(ngModel)]="expenseCategory.description" #editCategory="ngModel" required>
                  <div *ngIf="editCategory.touched && editCategory.invalid" class="text-danger">
                    El nombre de categoría es requerido
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" (click)="showEditModal = false">Cerrar</button>
                  <button type="submit" class="btn btn-success" [disabled]="editForm.invalid">Guardar</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
